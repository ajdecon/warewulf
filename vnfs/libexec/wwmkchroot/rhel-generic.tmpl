
PKGLIST="SysVinit basesystem bash redhat-release chkconfig coreutils e2fsprogs \
    ethtool filesystem findutils gawk grep initscripts iproute iputils \
    mingetty mktemp net-tools nfs-utils pam portmap procps psmisc rdate \
    sed setup shadow-utils rsyslog tcp_wrappers compat-termcap tzdata util-linux \
    words zlib tar less gzip which util-linux module-init-tools udev \
    openssh-clients openssh-server passwd dhclient pciutils vim-minimal \
    shadow-utils strace vixie-cron cronie crontabs"



sanity_check() {
    if ! rpm -q yum >/dev/null 2>&1; then
        echo "ERROR: Could not query RPM for YUM"
        return 1
    fi
    return 0
}

buildchroot() {

    VERSION=`rpm -qf /etc/redhat-release  --qf '%{VERSION}\n'`

    mkdir -p $VNFSDIR/etc

    cp -rap /etc/yum.conf /etc/yum.repos.d $VNFSDIR/etc
    sed -i -e "s/\$releasever/$VERSION/g" `find $VNFSDIR/etc/yum* -type f`

    yum --tolerant --installroot $VNFSDIR -y install $PKGLIST

    if [ $? -ne 0 ]; then
        echo "ERROR: Failed to create chroot"
        return 1
    fi

    return 0
}

postconfig() {
    touch $VNFSDIR/fastboot
    return 0
}

