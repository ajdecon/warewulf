#!/bin/sh
#
# Copyright (c) 2001-2003 Gregory M. Kurtzer
#
# Copyright (c) 2003-2011, The Regents of the University of California,
# through Lawrence Berkeley National Laboratory (subject to receipt of any
# required approvals from the U.S. Dept. of Energy).  All rights reserved.
#


. /etc/functions


DIRNAME=`dirname $0`
PROG=`basename $0`


if [ -z "$WWPROVISIONMETHOD" ]; then
    echo "ERROR: Provision method undefined!"
    exit;
fi

if [ -d "/warewulf/provision/" ]; then
    for i in `find /warewulf/provision/ -type f -name "*.all" -o -name "*.$WWPROVISIONMETHOD" | sort -n`; do
        if [ -x "$i" -a -f "$i" ]; then
            NAME=`basename $i | sed -e 's/^[0-9]*-\(.*\)\..*/\1/'`
            msg_white "   * $NAME "
            msg_gray "($i)\n"
            sh $i
        fi
    done
fi

